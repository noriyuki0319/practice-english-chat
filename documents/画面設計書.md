# 画面設計書：AI チャット英語学習システム

## 1. 概要

本ドキュメントは、「[要件定義書.md](./要件定義書.md)」に基づき、AI チャット英語学習システムの画面仕様を定義するものです。各画面のレイアウト、コンポーネント、およびユーザーインタラクションについて詳述します。

## 2. 画面・コンポーネント一覧

本システムで提供する画面と共通コンポーネントは以下の通りです。

| ID   | 種別           | 名前                       | 概要                                                 | 参照元 (要件定義書) |
| :--- | :------------- | :------------------------- | :--------------------------------------------------- | :------------------ |
| S-01 | 画面           | チャット画面               | AI との対話を行うメイン画面。                        | S-01                |
| S-02 | 画面           | ブックマーク一覧画面       | 保存したブックマークを管理する画面。                 | S-02                |
| S-03 | 画面           | 新規登録画面               | ユーザーがアカウントを作成する画面。                 | -                   |
| S-04 | 画面           | ログイン画面               | 登録済みユーザーがログインするための画面。           | -                   |
| S-05 | 画面           | パスワードリセット画面     | パスワードを忘れた際に再設定する画面。               | -                   |
| S-06 | 画面           | 設定画面                   | アカウント情報の管理やログアウトを行う画面。         | -                   |
| C-01 | コンポーネント | サイドバー                 | 主要機能へアクセスするための共通ナビゲーション。     | -                   |
| C-02 | コンポーネント | チャット用サイドバー       | チャット画面専用のサイドバー。グループ管理機能付き。 | -                   |
| C-03 | コンポーネント | 削除確認モーダル           | 何かを削除する前にユーザーに確認を求めるダイアログ。 | S-03                |
| C-04 | コンポーネント | グループ作成モーダル       | 新しいチャットグループを作成するためのモーダル。     | -                   |

---

## 3. 共通コンポーネント設計

### C-01: サイドバー

- **概要**: ログイン後の主要画面（ブックマーク一覧、設定）に常に表示されるナビゲーションメニュー。
- **表示場所**: 画面の左側に固定で表示する。
- **ワイヤーフレーム**:
  - **上部**:
    - アプリケーションのロゴまたはタイトル（「AI英語学習」「English Chat」）。
  - **中央 (ナビゲーションリンク)**:
    - `チャットアイコン`: チャット画面 (S-01) へ遷移。
    - `ブックマークアイコン`: ブックマーク一覧画面 (S-02) へ遷移。
  - **下部**:
    - `設定アイコン`: 設定画面 (S-06) へ遷移。
    - `ログアウトアイコン`: クリックするとログアウトし、ログイン画面 (S-04) へ遷移。

### C-02: チャット用サイドバー

- **概要**: チャット画面 (S-01) 専用のサイドバー。チャットグループの一覧表示と管理機能を提供する。
- **表示場所**: チャット画面の左側に固定で表示する。
- **ワイヤーフレーム**:
  - **上部**:
    - アプリケーションのロゴまたはタイトル（「AI英語学習」「English Chat」）。
  - **中央上部 (アクションボタン)**:
    - `新しいチャットボタン`: クリックすると `/chat` に遷移し、新しいチャットを開始する。
    - `グループを作成ボタン`: クリックするとグループ作成モーダル (C-04) が開く。
  - **中央 (チャットグループ一覧)**:
    - 「最近のチャット」というセクションタイトルを表示。
    - 最新10件のチャットグループをリスト表示。
    - 各グループには以下を表示:
      - グループタイトル
      - ホバー時に表示される`削除アイコン`（ゴミ箱）
    - グループをクリックすると該当のチャット画面 (`/chat/{id}`) へ遷移。
    - 削除アイコンをクリックすると確認ダイアログを表示し、削除を実行。
  - **下部**:
    - `ブックマークアイコン`: ブックマーク一覧画面 (S-02) へ遷移。
    - `設定アイコン`: 設定画面 (S-06) へ遷移。
    - `ログアウトアイコン`: クリックするとログアウトし、ログイン画面 (S-04) へ遷移。

### C-03: 削除確認モーダル

- **概要**: ブックマーク一覧画面 (S-02) やチャットグループ削除時に、誤操作を防ぐために表示される確認ダイアログ。
- **ワイヤーフレーム**:
  - モーダルウィンドウの中央に確認メッセージを表示する。（例：「このブックマークを削除しますか？」「このチャットグループを削除してもよろしいですか？」）
  - 下部に`キャンセルボタン`と`削除するボタン`を配置する。
    - `キャンセルボタン`: クリックするとモーダルを閉じる。
    - `削除するボタン`: クリックすると対象のアイテムを削除し、モーダルを閉じる。

### C-04: グループ作成モーダル

- **概要**: チャット用サイドバー (C-02) から新しいチャットグループを作成するためのモーダル。
- **ワイヤーフレーム**:
  - **ヘッダー**:
    - 「新しいチャットグループ」というタイトルを表示。
    - 右上に`閉じるアイコン`（×）を配置。
  - **コンテンツエリア**:
    - `グループ名`入力フィールド（プレースホルダー: 「例: ビジネス英語」）
  - **フッター**:
    - `キャンセルボタン`: クリックするとモーダルを閉じる。
    - `作成ボタン`: クリックするとグループを作成し、該当のチャット画面 (`/chat/{id}`) へ遷移。
    - グループ名が空の場合、作成ボタンは無効化される。
    - 作成中は「作成中...」と表示され、ボタンが無効化される。

---

## 4. 画面詳細設計

### S-01: チャット画面

- **概要**: ユーザーが AI と対話し、リアルタイムで英語表現を学習するコアとなる画面。
- **レイアウト**:
  - 画面左側にチャット用サイドバー (C-02) を配置。
  - 残りの右側領域がチャット画面の本体となる。
- **ワイヤーフレーム**:
  - **チャットログ (右側領域)**:
    - システムからの初期メッセージや AI からの提案メッセージは画面の左側に吹き出しで表示する。
    - ユーザーが入力したメッセージは画面の右側に吹き出しで表示する。
    - AI の各提案メッセージの吹き出し内には、`音声再生アイコン`と`ブックマークアイコン`を配置する。（F-04, F-05）
    - ユーザーから作成依頼されたメッセージに対して3つの吹き出しを具体的な文章と共に返すように実装してください。
    - 各吹き出しは独立してストリーミング表示される。
  - **フッター (右側領域)**:
    - テキスト入力フィールドを配置し、「（例）会議で使えるフレーズ」などのプレースホルダーを表示する。
    - `送信ボタン`を配置する。
- **チャットグループ管理**:
  - 新しいチャットを開始する場合 (`/chat`):
    - ユーザーが最初のメッセージを送信すると、自動的に新しいチャットグループが作成される。
    - グループタイトルはメッセージの最初の30文字から自動生成される。
  - 既存のチャットグループを開く場合 (`/chat/{id}`):
    - 該当グループの過去のメッセージ履歴を表示する。
    - 新しいメッセージは既存グループに追加される。

### S-02: ブックマーク一覧画面

- **概要**: ユーザーがチャット画面で保存した英語表現を一覧で確認・管理する画面。
- **レイアウト**:
  - 画面左側にサイドバー (C-01) を配置。
  - 残りの右側領域がブックマーク一覧画面の本体となる。
- **ワイヤーフレーム (右側領域)**:
  - **ヘッダー**:
    - 中央: 「ブックマーク一覧」というタイトルを表示。
  - **コンテンツエリア**:
    - ブックマークした項目をカード形式で縦方向にリスト表示する。
    - 各カードには、保存した`英文`、`日本語訳`を記載。
    - 各カードの右側には`音声再生アイコン`と`削除アイコン`（ゴミ箱など）を配置する。（F-07, F-08）
    - 削除アイコンをクリックすると、削除確認モーダル (C-02) が表示される。

### S-03: 新規登録画面

- **概要**: 新規ユーザーがサービスを利用するためにアカウントを登録する画面。
- **ワイヤーフレーム**:
  - 中央にフォームを配置。
  - フォームの要素:
    - `メールアドレス`入力フィールド
    - `パスワード`入力フィールド（入力文字は隠される）
    - `パスワード（確認用）`入力フィールド（入力文字は隠される）
    - `登録する`ボタン
  - フォームの下に「すでにアカウントをお持ちですか？ `ログイン`」というテキストとログイン画面 (S-04) へのリンクを配置する。

### S-04: ログイン画面

- **概要**: 既存ユーザーがサービスにログインするための画面。
- **ワイヤーフレーム**:
  - 中央にフォームを配置。
  - フォームの要素:
    - `メールアドレス`入力フィールド
    - `パスワード`入力フィールド（入力文字は隠される）
    - `ログイン`ボタン
  - フォームの下に、以下のテキストとリンクを配置する。
    - 「パスワードを忘れましたか？ `再設定`」: パスワードリセット画面 (S-05) へのリンク。
    - 「アカウントをお持ちでないですか？ `新規登録`」: 新規登録画面 (S-03) へのリンク。
  - （任意）Google や Apple などのソーシャルログインボタンを配置する。

### S-05: パスワードリセット画面

- **概要**: ユーザーが忘れたパスワードを再設定するための画面。
- **ワイヤーフレーム**:
  - **ステップ 1: 再設定メールの送信**
    - 「パスワードの再設定」というタイトルを表示。
    - 登録済みの`メールアドレス`を入力するフィールドを配置。
    - `再設定メールを送信`ボタンを配置。
    - `ログイン画面に戻る`リンク (S-04) を配置。
  - **ステップ 2: 新パスワードの設定（メール内のリンクから遷移）**
    - 「新しいパスワードの設定」というタイトルを表示。
    - `新しいパスワード`入力フィールド（入力文字は隠される）
    - `新しいパスワード（確認用）`入力フィールド（入力文字は隠される）
    - `パスワードを更新`ボタンを配置。

### S-06: 設定画面

- **概要**: ユーザーが自身のアカウント情報を管理したり、システムからログアウトしたりするための画面。
- **レイアウト**:
  - 画面左側にサイドバー (C-01) を配置。
  - 残りの右側領域が設定画面の本体となる。
- **ワイヤーフレーム (右側領域)**:
  - **ヘッダー**:
    - 中央: 「設定」というタイトルを表示。
  - **コンテンツエリア**:
    - リスト形式で各設定項目を配置。
    - **アカウント情報**:
      - `メールアドレス変更`: クリックすると変更用のフォーム画面またはモーダルを表示。
      - `パスワード変更`: クリックすると変更用のフォーム画面またはモーダルを表示。
    - **システム**:
      - `退会する`: クリックすると最終確認のモーダルを表示後、アカウントを削除する。
